---
title: '2021'
date: 2022-08-30 13:35:35
tags: echart
---

测试一下图表直接嵌入

### 图表一：看电影数量

<div id="test6" style="width: 100%;height: 600px;"></div>

<script type="text/javascript" src="/js/echarts.min.js"></script>
<script type="text/javascript" src="/js/jquery-3.6.1.min"></script>

<script type="text/javascript">
const myChart6 = echarts.init(document.getElementById('test6'));
const colors = ['#FFAE57', '#FF7853', '#EA5151', '#CC3F57', '#9A2555'];
const bgColor = '#2E2733';
const itemStyle = {
  star5: {
    color: colors[0]
  },
  star4: {
    color: colors[1]
  },
  star3: {
    color: colors[2]
  },
  star2: {
    color: colors[3]
  }
};
const data = [
  {
    name: '第一季度',
    itemStyle: {
      color: colors[1]
    },
    children: [
      {
        name: '二月',
        children: [
          {
            name: '5☆',
            children: [
              {
                name: '盗梦空间'
              }
            ]
          }  
         
        ]
      },
 {
        name: '三月',
        children: [
          {
            name: '5☆',
            children: [
              {
                name: '投名状'
              }, {
                name: '绿皮书'
              }, {
                name: '一代宗师'
              },{
                name: '鬼妈妈'
              },{
                name: '饮食男女'
              },{
                name: '利刃出鞘'
              },{
                name: 'EVA 1.1.1'
              },{
                name: 'EVA 2.2.2'
              },{
                name: 'EVA 3.3.3'
              },{
                name: '公主日记'
              },{
                name: '走出非洲'
              },{
                name: '真心为你 旧剧场'
              },{
                name: '傲慢与偏见 2005'
              },{
                name: '呼啸山庄'
              },{
                name: '阿凡达'
              },{
                name: '国王的演讲'
              },{
                name: '肖申克的救赎'
              },

            ]
          },
         
        ]
      },

    ]
  },
  {
    name: '第二季度',
    itemStyle: {
      color: colors[2]
    },
    children: [
      {
        name: '四月',
        children: [
          {
            name: '5☆',
            children: [
              {
                name: '教父1'
              },
              {
                name: '教父2'
              },
              {
                name: '教父3'
              },
              {
                name: '哈尔的移动城堡'
              },
              {
                name: '海上钢琴师'
              },
              {
                name: '麦克白'
              },
              {
                name: '岁月的童话'
              },
              {
                name: '听见涛声'
              },
              {
                name: '麦克白'
              },
              {
                name: '傲慢与偏见 1995'
              },
              {
                name: '小王子'
              },
              {
                name: '黑暗面'
              },
            ]
          }  
        ]
      },{
        name: '五月',
        children: [
          {
            name: '5☆',
            children: [
              {
                name: '斯巴达300勇士'
              },
              {
                name: '拯救大兵瑞恩'
              } 
            ]
          } ,{
            name: '4☆',
            children: [
              {
                name: '千禧之旅'
              } ,
              {
                name: '歌剧魅影 阿拉伯大剧院'
              } 
            ]
          }   
        ]
      },{
        name: '六月',
        children: [
          {
            name: '5☆',
            children: [
              {
                name: '珍珠港'
              },
              {
                name: '黑鹰坠落'
              },{
                name: '起风了'
              },
              {
                name: '埃及艳后'
              },  {
                name: '冒牌上尉'
              },
              {
                name: '黑客帝国'
              },{
                name: '黑客帝国2:重装上阵'
              },
              {
                name: '黑客帝国3:矩阵革命'
              }, 
              {
                name: '水形物语'
              },  {
                name: '月光男孩'
              }
            ]
          } ,{
            name: '4☆',
            children: [
              {
                name: '宇宙时空之旅'
              } 
            ]
          }  
        ]
      }
    ]
  },{
    name: '第三季度',
    itemStyle: {
      color: colors[2]
    },
    children: [
      {
        name: '七月',
        children: [
          {
            name: '5☆',
            children: [
              {
                name: '攻壳机动队'
              },
              {
                name: '霍比特人1:意外之旅'
              },
              {
                name: '霍比特人2'
              },
              {
                name: '霍比特人3:五军之战'
              },
              {
                name: '魔戒1：护戒使者'
              },
              {
                name: '魔戒2：双塔奇兵'
              },
              {
                name: '魔戒3: 国王归来'
              },
              {
                name: '特洛伊'
              }
            ]
          } ,{
            name: '4☆',
            children: [
              {
                name: '李尔王 伊恩戏剧'
              }
            ]
          }  
        ]
      },{
        name: '八月',
        children: [
          {
            name: '5☆',
            children: [
              {
                name: '伽利略传'
              },
              {
                name: '返老还童'
              },
              {
                name: '蝙蝠侠3:黑暗骑士的崛起'
              },
              {
                name: '蝙蝠侠1:侠影之谜'
              }, 
              {
                name: '蝙蝠侠2:黑暗骑士'
              },
              {
                name: '末代皇帝'
              },
              {
                name: '血钻'
              },
              {
                name: '飞行员'
              }, 
              {
                name: '地狱天使'
              }
            ]
          }  
        ]
      },{
        name: '九月',
        children: [
          {
            name: '5☆',
            children: [
              {
                name: '保镖'
              },
              {
                name: 'EVA4.44 终'
              },{
                name: '钱学森'
              },
              {
                name: '焦裕禄 1990'
              },  {
                name: '小妇人'
              },
              {
                name: '达芬奇密码'
              } 
            ]
          } ,{
            name: '3☆',
            children: [
              {
                name: '觉醒年代'
              } 
            ]
          } ,{
            name: '2☆',
            children: [
              {
                name: 'EVA访谈'
              } , {
                name: '艾萨克·牛顿：最后的魔术师'
              } ,
            ]
          }  
        ]
      }
    ]
  },{
    name: '第四季度',
    itemStyle: {
      color: colors[2]
    },
    children: [
      {
        name: '十月',
        children: [
          {
            name: '5☆',
            children: [
              {
                name: '我和我的家乡'
              },
              {
                name: '红河谷'
              },
              {
                name: '逃离德黑兰'
              },
              {
                name: '困在时间里的父亲'
              },
              {
                name: '爱乐之城'
              },
              {
                name: '罗密欧与朱丽叶 2001'
              },
              {
                name: '莎翁情史'
              },
              {
                name: '敦刻尔克'
              },
              {
                name: 'Hello！树先生'
              },
              {
                name: '至暗时刻'
              },
              {
                name: '哈姆雷特 1948'
              } 
            ]
          }  
        ]
      },{
        name: '十一月',
        children: [
          {
            name: '5☆',
            children: [
              {
                name: '飞越过疯人院'
              },
              {
                name: '雨人'
              } ,
              {
                name: '低俗小说'
              },
              {
                name: '勇敢的心'
              } ,
              {
                name: '英国病人'
              },
              {
                name: '天书奇谭'
              } ,
              {
                name: '悲惨世界 2013'
              },
              {
                name: '父辈的旗帜'
              } ,
              {
                name: '硫磺岛的来信'
              }  
            ]
          } ,{
            name: '3☆',
            children: [
              {
                name: '天道'
              }  
            ]
          }   
        ]
      },{
        name: '十二月',
        children: [
          {
            name: '5☆',
            children: [
              {
                name: '风语者'
              },
              {
                name: '第十二夜'
              },{
                name: '战争与和平 苏联版'
              },
              {
                name: '安娜卡列尼娜 1997'
              },  {
                name: '安娜 卡列尼娜 2013'
              },
              {
                name: '安娜 卡列尼娜 2012'
              },{
                name: '紫罗兰永恒花园剧场版'
              } 
            ]
          } ,{
            name: '4☆',
            children: [
              {
                name: '斯大林格勒保卫战'
              } 
            ]
          }  
        ]
      }
    ]
  }
];

for (let j = 0; j < data.length; ++j) {
  let level1 = data[j].children;
  for (let i = 0; i < level1.length; ++i) {
    let block = level1[i].children;
    let bookScore = [];
    let bookScoreId;
    for (let star = 0; star < block.length; ++star) {
      let style = (function (name) {
        switch (name) {
          case '5☆':
            bookScoreId = 0;
            return itemStyle.star5;
          case '4☆':
            bookScoreId = 1;
            return itemStyle.star4;
          case '3☆':
            bookScoreId = 2;
            return itemStyle.star3;
          case '2☆':
            bookScoreId = 3;
            return itemStyle.star2;
        }
      })(block[star].name);
      block[star].label = {
        color: style.color,
        downplay: {
          opacity: 0.5
        }
      };
      if (block[star].children) {
        style = {
          opacity: 1,
          color: style.color
        };
        block[star].children.forEach(function (book) {
          book.value = 1;
          book.itemStyle = style;
          book.label = {
            color: style.color
          };
          let value = 1;
          if (bookScoreId === 0 || bookScoreId === 3) {
            value = 5;
          }
          if (bookScore[bookScoreId]) {
            bookScore[bookScoreId].value += value;
          } else {
            bookScore[bookScoreId] = {
              color: colors[bookScoreId],
              value: value
            };
          }
        });
      }
    }
    level1[i].itemStyle = {
      color: data[j].itemStyle.color
    };
  }
}
const option = {
  backgroundColor: bgColor,
  color: colors,
  series: [
    {
      type: 'sunburst',
      center: ['50%', '48%'],
      data: data,
      sort: function (a, b) {
        if (a.depth === 1) {
          return b.getValue() - a.getValue();
        } else {
          return a.dataIndex - b.dataIndex;
        }
      },
      label: {
        rotate: 'radial',
        color: bgColor
      },
      itemStyle: {
        borderColor: bgColor,
        borderWidth: 2
      },
      levels: [
        {},
        {
          r0: 0,
          r: 40,
          label: {
            rotate: 0
          }
        },
        {
          r0: 40,
          r: 105
        },
        {
          r0: 115,
          r: 140,
          itemStyle: {
            shadowBlur: 2,
            shadowColor: colors[2],
            color: 'transparent'
          },
          label: {
            rotate: 'tangential',
            fontSize: 10,
            color: colors[0]
          }
        },
        {
          r0: 140,
          r: 145,
          itemStyle: {
            shadowBlur: 80,
            shadowColor: colors[0]
          },
          label: {
            position: 'outside',
            textShadowBlur: 5,
            textShadowColor: '#333'
          },
          downplay: {
            label: {
              opacity: 0.5
            }
          }
        }
      ]
    }
  ]
};
myChart6.setOption(option)
</script>




 
> 结论：整理了2021的观影数据，呵还是有一点神奇，有些电影极大的拓宽了自己的眼界。

*** 